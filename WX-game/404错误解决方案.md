# 404 é”™è¯¯è§£å†³æ–¹æ¡ˆ

## âŒ å½“å‰é—®é¢˜

```
GET http://192.168.100.121/ServerFile/MyPackage.version
404 (Not Found)
```

**é”™è¯¯åŸå› ï¼š** æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶è·¯å¾„ä¸ä»£ç è¯·æ±‚çš„è·¯å¾„ä¸åŒ¹é…

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šä¿®æ”¹æœåŠ¡å™¨æ–‡ä»¶ç»“æ„ï¼ˆæ¨èï¼‰

#### æ­¥éª¤1ï¼šå¤åˆ¶æ–‡ä»¶åˆ°æ­£ç¡®ä½ç½®

**ä»ï¼š**
```
d:\hub\WX-game\Bundles\WebGL\MyPackage\
```

**åˆ°ï¼š**
```
æœåŠ¡å™¨æ ¹ç›®å½•\ServerFile\WebGL\MyPackage\
```

#### æ­¥éª¤2ï¼šä½¿ç”¨è‡ªåŠ¨éƒ¨ç½²è„šæœ¬

å·²ä¸ºæ‚¨åˆ›å»ºäº†è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ `Deploy-YooAsset.ps1`

**ä½¿ç”¨æ–¹æ³•ï¼š**

1. æ‰“å¼€ PowerShellï¼ˆä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œï¼‰
2. è¿›å…¥é¡¹ç›®ç›®å½•ï¼š
   ```powershell
   cd d:\hub\WX-game
   ```

3. è¿è¡Œéƒ¨ç½²è„šæœ¬ï¼š
   ```powershell
   .\Deploy-YooAsset.ps1
   ```

4. æˆ–æŒ‡å®šæœåŠ¡å™¨è·¯å¾„ï¼š
   ```powershell
   .\Deploy-YooAsset.ps1 -ServerPath "\\192.168.100.121\www\ServerFile"
   ```

#### æ­¥éª¤3ï¼šéªŒè¯éƒ¨ç½²

éƒ¨ç½²åï¼ŒæœåŠ¡å™¨ä¸Šåº”è¯¥æœ‰ä»¥ä¸‹ç»“æ„ï¼š

```
ServerFile/
â””â”€â”€ WebGL/
    â””â”€â”€ MyPackage/
        â”œâ”€â”€ 2026-02-20-607/
        â”‚   â”œâ”€â”€ MyPackage.version
        â”‚   â”œâ”€â”€ MyPackage_2026-02-20-607.bytes
        â”‚   â”œâ”€â”€ MyPackage_2026-02-20-607.hash
        â”‚   â””â”€â”€ MyPackage_2026-02-20-607.json
        â””â”€â”€ OutputCache/
            â”œâ”€â”€ assets_dll.bundle
            â”œâ”€â”€ assets_prefs.bundle
            â””â”€â”€ ... (å…¶ä»– bundle æ–‡ä»¶)
```

#### æ­¥éª¤4ï¼šæµ‹è¯•è®¿é—®

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ä»¥ä¸‹ URL æµ‹è¯•ï¼š

```
http://192.168.100.121/ServerFile/WebGL/MyPackage/2026-02-20-607/MyPackage.version
```

**é¢„æœŸç»“æœï¼š** åº”è¯¥æ˜¾ç¤ºç‰ˆæœ¬å·ï¼Œä¾‹å¦‚ï¼š`2026-02-20-607`

### æ–¹æ¡ˆ2ï¼šæ‰‹åŠ¨å¤åˆ¶ï¼ˆé€‚åˆå¿«é€Ÿæµ‹è¯•ï¼‰

#### Windows æ–‡ä»¶ç®¡ç†å™¨æ–¹å¼

1. æ‰“å¼€æ–‡ä»¶ç®¡ç†å™¨
2. å¯¼èˆªåˆ°ï¼š`d:\hub\WX-game\Bundles\WebGL\`
3. å¤åˆ¶ `MyPackage` æ•´ä¸ªæ–‡ä»¶å¤¹
4. ç²˜è´´åˆ°æœåŠ¡å™¨çš„ `ServerFile\WebGL\` ç›®å½•ä¸‹

#### PowerShell å‘½ä»¤æ–¹å¼

```powershell
# åˆ›å»ºç›®æ ‡ç›®å½•
New-Item -Path "\\192.168.100.121\ServerFile\WebGL" -ItemType Directory -Force

# å¤åˆ¶æ–‡ä»¶
Copy-Item -Path "d:\hub\WX-game\Bundles\WebGL\MyPackage" `
          -Destination "\\192.168.100.121\ServerFile\WebGL\" `
          -Recurse -Force

# éªŒè¯
Test-Path "\\192.168.100.121\ServerFile\WebGL\MyPackage"
```

## ğŸ”§ ä»£ç ä¿®æ”¹è¯´æ˜

å·²ä¿®æ”¹ `HotUpdateLoad.cs` ä¸­çš„ `OnWebPlayMode()` æ–¹æ³•ï¼š

**ä¿®æ”¹å‰ï¼š**
```csharp
string defaultHostServer = HostHttp;  // http://192.168.100.121/ServerFile/
```

**ä¿®æ”¹åï¼š**
```csharp
string defaultHostServer = $"{HostHttp}WebGL/{PackageName}";
// ç»“æœ: http://192.168.100.121/ServerFile/WebGL/MyPackage
```

è¿™æ · YooAsset ä¼šæ­£ç¡®è¯·æ±‚ï¼š
```
http://192.168.100.121/ServerFile/WebGL/MyPackage/2026-02-20-607/MyPackage.version
```

## ğŸŒ URL è·¯å¾„è¯´æ˜

### YooAsset è¯·æ±‚çš„ URL ç»“æ„

```
{HostHttp} + WebGL/{PackageName} + /{Version} + /{FileName}
    â†“            â†“                     â†“            â†“
ServerFile/  WebGL/MyPackage    2026-02-20-607   MyPackage.version
```

**å®Œæ•´ URLï¼š**
```
http://192.168.100.121/ServerFile/WebGL/MyPackage/2026-02-20-607/MyPackage.version
```

### RemoteServices ç±»çš„å·¥ä½œæ–¹å¼

```csharp
private class RemoteServices : IRemoteServices
{
    string IRemoteServices.GetRemoteMainURL(string fileName)
    {
        // fileName ç”± YooAsset è‡ªåŠ¨æä¾›ï¼Œä¾‹å¦‚ï¼š
        // "2026-02-20-607/MyPackage.version"
        // "2026-02-20-607/MyPackage_2026-02-20-607.bytes"
        // "OutputCache/assets_dll.bundle"
        
        return $"{_defaultHostServer}/{fileName}";
        // ç»“æœ: http://192.168.100.121/ServerFile/WebGL/MyPackage/{fileName}
    }
}
```

## ğŸ“‹ å®Œæ•´çš„éƒ¨ç½²æ£€æŸ¥æ¸…å•

### âœ… éƒ¨ç½²å‰

- [ ] Unity å·²æˆåŠŸæ„å»º WebGL èµ„æºåŒ…
- [ ] ç¡®è®¤æ„å»ºè¾“å‡ºä½ç½®ï¼š`d:\hub\WX-game\Bundles\WebGL\MyPackage`
- [ ] ç¡®è®¤æœåŠ¡å™¨è·¯å¾„å¯è®¿é—®
- [ ] ç¡®è®¤æœ‰æœåŠ¡å™¨å†™å…¥æƒé™

### âœ… éƒ¨ç½²ä¸­

- [ ] åˆ›å»ºç›®æ ‡ç›®å½•ï¼š`ServerFile/WebGL/MyPackage`
- [ ] å¤åˆ¶æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•
- [ ] ä¿æŒç›®å½•ç»“æ„ä¸å˜

### âœ… éƒ¨ç½²å

- [ ] éªŒè¯æ–‡ä»¶å­˜åœ¨
- [ ] åœ¨æµè§ˆå™¨ä¸­æµ‹è¯•ç‰ˆæœ¬æ–‡ä»¶ URL
- [ ] åœ¨æµè§ˆå™¨ä¸­æµ‹è¯•èµ„æºæ–‡ä»¶ URL
- [ ] æ£€æŸ¥æ–‡ä»¶æƒé™ï¼ˆç¡®ä¿ Web æœåŠ¡å™¨å¯è¯»ï¼‰
- [ ] è¿è¡Œ Unity WebGL æ„å»ºæµ‹è¯•åŠ è½½

## ğŸ› å¸¸è§é—®é¢˜

### Q1: éƒ¨ç½²åè¿˜æ˜¯ 404

**æ£€æŸ¥ï¼š**
1. URL å¤§å°å†™æ˜¯å¦åŒ¹é…ï¼ˆLinux æœåŠ¡å™¨åŒºåˆ†å¤§å°å†™ï¼‰
2. æ–‡ä»¶æƒé™æ˜¯å¦æ­£ç¡®
3. IIS/Apache/Nginx è™šæ‹Ÿç›®å½•é…ç½®
4. é˜²ç«å¢™æ˜¯å¦é˜»æ­¢è®¿é—®

**è§£å†³ï¼š**
```powershell
# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
Test-Path "\\192.168.100.121\ServerFile\WebGL\MyPackage\2026-02-20-607\MyPackage.version"

# åœ¨æµè§ˆå™¨ä¸­è®¿é—®
http://192.168.100.121/ServerFile/WebGL/MyPackage/2026-02-20-607/MyPackage.version
```

### Q2: è·¨åŸŸ CORS é”™è¯¯

**IIS é…ç½®ï¼ˆweb.configï¼‰ï¼š**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.webServer>
    <httpProtocol>
      <customHeaders>
        <add name="Access-Control-Allow-Origin" value="*" />
        <add name="Access-Control-Allow-Methods" value="GET, POST, OPTIONS" />
        <add name="Access-Control-Allow-Headers" value="Content-Type" />
      </customHeaders>
    </httpProtocol>
  </system.webServer>
</configuration>
```

**Apache é…ç½®ï¼ˆ.htaccessï¼‰ï¼š**
```apache
Header set Access-Control-Allow-Origin "*"
Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
Header set Access-Control-Allow-Headers "Content-Type"
```

**Nginx é…ç½®ï¼š**
```nginx
location /ServerFile/ {
    add_header Access-Control-Allow-Origin *;
    add_header Access-Control-Allow-Methods "GET, POST, OPTIONS";
    add_header Access-Control-Allow-Headers "Content-Type";
}
```

### Q3: ç‰ˆæœ¬å·å˜åŒ–äº†æ€ä¹ˆåŠ

YooAsset æ¯æ¬¡æ„å»ºéƒ½ä¼šç”Ÿæˆæ–°çš„ç‰ˆæœ¬å·ç›®å½•ï¼ˆä¾‹å¦‚ `2026-02-20-607`ï¼‰ã€‚

**è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆï¼š**
- ä½¿ç”¨éƒ¨ç½²è„šæœ¬è‡ªåŠ¨å¤åˆ¶æœ€æ–°ç‰ˆæœ¬
- æˆ–è€…é…ç½® CI/CD è‡ªåŠ¨éƒ¨ç½²

**æ‰‹åŠ¨è§£å†³æ–¹æ¡ˆï¼š**
- æ¯æ¬¡æ„å»ºåé‡æ–°å¤åˆ¶ `MyPackage` æ–‡ä»¶å¤¹åˆ°æœåŠ¡å™¨

## ğŸ“ å¿«é€Ÿæµ‹è¯•å‘½ä»¤

```powershell
# 1. æµ‹è¯•æœåŠ¡å™¨è¿æ¥
Test-NetConnection -ComputerName 192.168.100.121 -Port 80

# 2. æµ‹è¯•æ–‡ä»¶è®¿é—®ï¼ˆPowerShellï¼‰
Invoke-WebRequest -Uri "http://192.168.100.121/ServerFile/WebGL/MyPackage/2026-02-20-607/MyPackage.version"

# 3. æµ‹è¯•æ–‡ä»¶è®¿é—®ï¼ˆcurlï¼‰
curl http://192.168.100.121/ServerFile/WebGL/MyPackage/2026-02-20-607/MyPackage.version
```

## ğŸ¯ æ€»ç»“

1. **é—®é¢˜æ ¹æº**ï¼šæœåŠ¡å™¨æ–‡ä»¶è·¯å¾„ä¸ä»£ç è¯·æ±‚è·¯å¾„ä¸åŒ¹é…
2. **è§£å†³æ–¹æ³•**ï¼šå°†æ–‡ä»¶å¤åˆ¶åˆ° `ServerFile/WebGL/MyPackage/` ç›®å½•
3. **éªŒè¯æ–¹å¼**ï¼šåœ¨æµè§ˆå™¨ä¸­è®¿é—®ç‰ˆæœ¬æ–‡ä»¶ URL
4. **è‡ªåŠ¨åŒ–å·¥å…·**ï¼šä½¿ç”¨æä¾›çš„ PowerShell éƒ¨ç½²è„šæœ¬

---

**éœ€è¦å¸®åŠ©ï¼Ÿ** è¯·æŒ‰ç…§ä¸Šè¿°æ­¥éª¤æ“ä½œï¼Œå¦‚ä»æœ‰é—®é¢˜è¯·æä¾›ï¼š
- æœåŠ¡å™¨ç±»å‹ï¼ˆIIS/Apache/Nginxï¼‰
- æµè§ˆå™¨æµ‹è¯• URL çš„ç»“æœ
- Unity Console çš„å®Œæ•´é”™è¯¯æ—¥å¿—
